<mat-progress-bar *ngIf="loading" mode="query"></mat-progress-bar>

<div class="shadow bg-base-200 drawer drawer-mobile h-screen">
  <input class="drawer-toggle" id="my-drawer-2" type="checkbox">

  <div class="flex flex-col items-center justify-start drawer-content">
    <div class="navbar shadow-lg bg-base-100 text-neutral-content w-full sticky top-0 z-10">

      <div class="px-2 mx-2 navbar-start">
        <div class="lg:hidden">
          <label class="btn btn-ghost text-gray-5000 drawer-button" for="my-drawer-2">
            <mat-icon class="text-black">menu</mat-icon>
          </label>
        </div>
        <button (click)="toggleSide()" *ngIf="showSide"
                class="hidden lg:block btn btn-ghost text-gray-5000 drawer-button relative -left-5">
          <mat-icon class="text-black">menu</mat-icon>
        </button>
        <div class="flex flex-row justify-center items-center px-2 mx-2 {{showSide ? '' : 'lg:hidden'}} pl-8 sm:pl-0">
          <a routerLink="/admin">
            <img [style.width]="showSide ? '92px' : '75px'" alt="Dealersoft.de Black brand"
                 src="assets/brand_logo/dealersoft_black.png" style="height: 48px">
          </a>
        </div>
      </div>

      <div class="hidden px-2 mx-2 navbar-center lg:flex">
        <h1 class="font-montserrattracking-widest font-bold text-2xl ml-10 text-gray-900">{{titlePage}}</h1>
      </div>

      <div class="navbar-end hidden sm:flex" >
        <button class="" [matMenuTriggerFor]="menu" id="button_menu">
        <div *ngIf="isAuth" class="flex items-center  rounded-full border-2" >
          <span class="px-5 py-2 font-montserratfont-semibold text-gray-900" >
            {{authUser?.first_name}} {{authUser?.last_name}}
          </span>
          <img *ngIf="showLogo else defaultImg" [src]="imgPath | saveDom" alt="user_img" class="rounded-full mr-3"
               width="42px"/>
          <ng-template #defaultImg>
            <img alt="user_img_default" src="assets/user-male-circle.png"/>
          </ng-template>
        </div>
      </button>
      </div>

    </div>
<!-- Menu boton superior derecho -->
    <mat-menu #menu="matMenu" class="ml-4" >
      <ul>
        <li>
          

          <a (click)="abrirProfile()" class="flex justify-start items-center hover:font-bold pt-2 cursor-pointer" id="logout">
            <!-- <mat-icon class="text-3xl ml-3 relative" style="top: -6px">logout</mat-icon> -->
            <img class="ml-2 " alt="user_img_default" src="assets/user-male-circle.png"/>
            <span class="pt-3 px-4 relative" style="top: -4px">Profile</span>
          </a>


        </li>
        <li>
      <a (click)="logOut()" class="flex justify-start items-center hover:font-bold pt-2 cursor-pointer" id="logout">
        <mat-icon class="text-3xl ml-3 relative" style="top: -6px">logout</mat-icon>
        <span class="pt-3 px-5 relative" style="top: -4px">Logout </span>
      </a>
    </li>

    </ul>
  
    </mat-menu>
    

    <main class="w-full z-0 px-8 pt-6 pb-5">
      <router-outlet></router-outlet>
    </main>

  </div>

  <div class="drawer-side">
    <label class="drawer-overlay" for="my-drawer-2"></label>
    <ul #drawerSide
        class="menu p-4 overflow-y-auto w-80 bg-base-100 text-base-content h-full animate__animated lg:animate__fadeInLeft">
      <li class="border-b-2 border-gray-200 mb-5 hidden lg:flex lg:flex-row lg:justify-center lg:items-center">
        <img (click)="toAdmin()" alt="Dealersoft.de Black brand" class="cursor-pointer h-[140px] w-[230px]"
             src="assets/brand_logo/dealersoft_black.png">
        <button (click)="toggleSide()" class="hidden lg:block btn btn-ghost text-gray-5000 drawer-button"
                style="position: absolute;top: 10px;right: 10px;">
          <mat-icon class="text-black">close</mat-icon>
        </button>
      </li>

      <!-- Menu lateral -->

      <li *ngFor="let link of links" class="my-0.5">



        <ng-container *ngIf="link.type === 'link'">
        
          <a [routerLink]="link.url" [ngClass]="{'mt-2' : link.up_space}" class="flex justify-start items-center hover:font-bold" routerLinkActive="link-active">
            <!-- <a [routerLink]="link.url" [ngClass]="{'  border-t-2 border-gray-200' : link.up_space}" class="flex justify-start items-center hover:font-bold" routerLinkActive="link-active"> -->

             <ng-container *ngIf="link.img!='';else icono">
                 <img class="mr-3 relative" alt="{{link.label}}" src="assets/menu_icons/{{link.img}}" style="height: 20px">
             </ng-container>

            <ng-template #icono>
              <mat-icon class="text-2xl mr-2 relative" style="top: -6px; left: -2px">{{link.icon}}</mat-icon> 
            </ng-template>
               <span class="" >{{link.label}}</span> 
          </a>
        </ng-container>

        <ng-container *ngIf="link.type === 'button'">
          <a (click)="logOut()" [ngClass]="{'mt-2' : link.up_space}" class="flex justify-start items-center hover:font-bold" id="logout">
            <ng-container *ngIf="link.img!='';else icono">
              <img class="mr-3 relative" alt="{{link.label}}" src="assets/menu_icons/{{link.img}}" style="height: 20px">
            </ng-container>

            <ng-template #icono>
              <mat-icon class="text-2xl mr-2 relative" style="top: -6px; left: -2px">{{link.icon}}</mat-icon> 
            </ng-template>
         
            <span class="pt-3 relative" style="top: -4px">{{link.label}}</span>
          </a>
        </ng-container>
      </li>



      <li *ngIf="authUser?.active_until" class="my-0.5">
        <div class="flex rounded-lg flex-row w-full h-14 shadow">
          <div (click)="toStripePayment()"  class="w-1/4 bg-[#42A5F5] h-full rounded-l-lg flex items-center justify-center cursor-pointer tooltip tooltip-bottom" data-tip="Pay platform">
            <!-- <svg height="76" style=" fill:#000000;" viewBox="0 0 172 172" width="76" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px">
              <g fill="none" fill-rule="nonzero" font-family="none" font-size="none" font-weight="none" stroke="none"
                 stroke-dasharray="" stroke-dashoffset="0" stroke-linecap="butt" stroke-linejoin="miter"
                 stroke-miterlimit="10" stroke-width="1" style="mix-blend-mode: normal" text-anchor="none">
                <path d="M0,172v-172h172v172z" fill="none"></path>
                <g>
                  <path d="M149.65792,136.16667h-127.31583c-6.43567,0 -11.59208,-4.90917 -11.59208,-11.29467v-81.055c0,-6.38908 5.15642,-11.567 11.59208,-11.567h127.31225c6.43567,0 11.59567,5.17792 11.59567,11.567v81.055c0,6.3855 -5.16,11.29467 -11.59208,11.29467z"  fill="#03a9f4"></path>
                  <path d="M132.03508,83.40925c0.24725,-3.94525 1.2685,-5.77992 3.31817,-5.77992c1.96367,0 3.03867,1.88842 3.17483,5.77992zM146.74825,85.76708c0,-4.4075 -0.9675,-7.89408 -2.79858,-10.33792c-1.935,-2.49758 -4.82317,-3.7625 -8.45308,-3.7625c-7.482,0 -12.169,5.53983 -12.169,14.41217c0,4.95933 1.23625,8.69675 3.7195,11.05458c2.21092,2.13208 5.38575,3.19992 9.42417,3.19992c3.75175,0 7.22758,-0.89942 9.43133,-2.34708l-0.96033,-6.04867c-2.17508,1.18608 -4.69417,1.83108 -7.50708,1.83108c-1.68417,0 -2.88817,-0.36908 -3.741,-1.10367c-0.93883,-0.78475 -1.462,-2.04967 -1.64833,-3.85567h14.577c0.09317,-0.41208 0.12542,-2.4295 0.12542,-3.04225zM111.28758,91.49325c-0.79192,1.35092 -1.90275,2.07833 -3.18917,2.07833c-0.86358,0 -1.69133,-0.18992 -2.39725,-0.52675v-13.32283c1.53367,-1.58025 2.91683,-1.75942 3.3755,-1.75942c2.26108,0 3.37192,2.44025 3.37192,7.22758c0.01075,2.72333 -0.40133,4.84467 -1.161,6.30308zM118.65492,74.20725c-1.5695,-2.04608 -3.79475,-3.05658 -6.61125,-3.05658c-2.55133,0 -4.81242,1.08217 -6.93017,3.354l-0.50883,-2.80933h-7.85467v39.388l8.89025,-1.49067l0.06092,-10.02975c1.38675,0.43358 2.79142,0.66292 4.05275,0.66292c2.24675,0 5.4825,-0.56258 8.00875,-3.31817c2.39008,-2.61583 3.569,-6.67217 3.569,-12.04358c0,-4.74792 -0.87792,-8.34917 -2.67675,-10.65683zM84.30508,71.69533h8.86158v28.638h-8.86158zM88.80933,68.91825c2.57283,0 4.65833,-2.1285 4.65833,-4.70492c0,-2.62658 -2.09267,-4.73 -4.65833,-4.73c-2.6445,0 -4.74075,2.10342 -4.74075,4.73c0,2.58 2.09625,4.70492 4.74075,4.70492zM80.49242,71.30833c-2.52625,0 -4.58308,1.333 -5.34275,3.69442l-0.5375,-3.30025h-7.77583v28.63083h8.89383v-18.8125c1.118,-1.36883 2.68392,-1.86333 4.8805,-1.86333c0.45508,0 0.91733,0 1.5695,0.09317v-8.22017c-0.65575,-0.14692 -1.19683,-0.22217 -1.68775,-0.22217zM63.35333,78.31375l1.10367,-6.622h-5.73692v-8.04458l-7.62892,1.2685l-1.10725,6.77608l-2.68392,0.44075l-0.99258,6.18483h3.66933v12.97883c0,3.37192 0.85283,5.72975 2.58,7.1595c1.50858,1.20042 3.62275,1.76658 6.60408,1.76658c2.3435,0 3.73742,-0.40133 4.64758,-0.65933v-7.01975c-0.47658,0.14692 -1.72,0.41208 -2.56567,0.41208c-1.72,0 -2.52625,-0.89583 -2.52625,-2.95625v-11.69958h4.63683zM37.73608,82.59583c-2.53342,-0.94958 -4.00617,-1.69492 -4.00617,-2.87742c0,-0.98542 0.82058,-1.55517 2.31483,-1.55517c2.64092,0 5.40725,1.00692 7.24908,1.94933l1.075,-6.55392c-1.49783,-0.72383 -4.54725,-1.892 -8.7505,-1.892c-3.01,0 -5.50042,0.78833 -7.21683,2.22525c-1.90633,1.53725 -2.87383,3.73742 -2.87383,6.39983c0,4.82675 2.95267,6.87283 7.7615,8.60717c3.07092,1.10367 4.13517,1.88842 4.13517,3.11033c0,1.15383 -0.98183,1.84183 -2.84875,1.84183c-2.236,0 -5.88025,-1.11083 -8.33842,-2.51908l-1.0105,6.63992c2.064,1.15383 5.86233,2.36142 9.847,2.36142c3.17842,0 5.81217,-0.7525 7.53217,-2.1715c2.03533,-1.548 3.02433,-3.85925 3.02433,-6.82625c0.00717,-4.95575 -3.02075,-7.01617 -7.89408,-8.73975z"  fill="#ffffff"></path>
                </g>
              </g>
            </svg> -->

            <img  alt="Dealersoft.de Black brand"
            src="assets/brand_logo/dealersoft_black.png" style="height: 38px">
          </div>
          <div  class="w-3/4 {{days > 0 ? 'bg-blue-600' : 'bg-orange-600'}} h-full rounded-r-lg flex flex-row justify-center items-center pl-2 py-1">
            <p class="font-montserratfont-semibold text-white p-0 m-0">
              <span>verbleibende Testphase:</span>
              <span class="ml-0.5 bg-transparent py-0.5 px-1 rounded text-gray-50">
                {{days + ' Tage'}}
              </span>
            </p>
          </div>
        </div>
      </li>
    </ul>
  </div>

</div>
